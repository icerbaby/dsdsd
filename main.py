from pygame import *


fps = 60
game_finished, game_run = False, True
clock = time.Clock()


window_width, window_height = 1365, 700



window = display.set_mode((window_width, window_height))
display.set_caption("Илья динаху")


mixer.init()

mixer.music.load("анадитіху.mp3")
mixer.music.play()

class GameSprite(sprite.Sprite):
    def __init__(self, img, pos, size, speed):
        super().__init__()

        
        self.image = transform.smoothscale(
            image.load(img),
            size
        )

        self.rect = self.image.get_rect()
        self.rect.x, self.rect.y = pos

        self.speed = speed
        self.width, self.height = size

    def reset(self):
        window.blit(self.image, (self.rect.x, self.rect.y))

class Player(GameSprite):
    def update(self):
        keys = key.get_pressed()
        if keys[K_w] and self.rect.y > 0:
            self.rect.y -= self.speed
        if keys[K_s] and self.rect.y < window_height - self.height:
            self.rect.y += self.speed
        if keys[K_a] and self.rect.x > 0:
            self.rect.x -= self.speed
        if keys[K_d] and self.rect.x < window_width - self.width:
            self.rect.x += self.speed

        if sprite.spritecollide(self,enemy_group, False):
            print("a")


class Enemy(GameSprite):
    def __init__(self, img, pos, size, speed):
        super().__init__(img, pos, size, speed)

        self.direction_x, self.direction_y = "right", "top"
        self.start_x, self.end_x = None, None
        self.start_y, self.end_y = None, None    

    def set_track_x(self, start_x, end_x):
        self.start_x, self.end_x = start_x, end_x

    def set_track_y(self, start_y, end_y):
        self.start_y, self.end_y = start_y, end_y

    def update(self):
        if self.start_x != None and self.end_x != None:
            if self.direction_x == "right":
                if self.rect.x < self.end_x:
                    self.rect.x += self.speed
                else:
                    self.direction_x = "left"
            else:
                if self.rect.x > self.start_x:
                    self.rect.x -= self.speed
                else:
                    self.direction_x = "right"

        if self.start_y != None and self.end_y != None:
            if self.direction_y == "top":
                if self.rect.y < self.end_y:
                    self.rect.y += self.speed
                else:
                    self.direction_y = "bottom"
            else:
                if self.rect.y > self.start_y:
                    self.rect.y -= self.speed
                else:
                    self.direction_x = "top"

class Wall(sprite.Sprite):
    def __init__(self, pos, size, color):
        super().__init__()

        self.image = Surface(size)
        self.image.fill(color)

        self.rect = self.image.get_rect()
        self.rect.x, self.rect.y = pos
        self.width, self.height = size

    def update(self):
        window.blit(self.image, (self.rect.x, self.rect.y))

bg = GameSprite(img = "bg.jpg", pos = (0, 0), size = (window_height, window_width), speed = 0)

player1 = Player(img = "player1.png", pos = (5, 400), size = (50, 50), speed = 5)
enemy1= Enemy(img = "enemy.png", pos = (400, 400), size = (50, 50), speed = 5)
enemy1.set_track_x(300, 428)
enemy1.set_track_y(300, 428)


enemy2 = Enemy(img = "enemy.png", pos = (200, 400), size = (50, 50), speed = 5)


enemy_group = sprite.Group()
enemy_group.add([enemy1, enemy2])


wall1 = Wall(pos=(100,100), size= (100,24), color=(100,100,100))
wall2 = Wall(pos=(100,250), size= (24,100), color=(100,100,100))
wall3 = Wall(pos=(100,400), size= (24,24), color=(100,100,100))

walls_group = sprite.Group()
walls_group.add([wall1, wall2,wall3])

while game_run:
    for ev in event.get():
        if ev.type == QUIT:
            game_run = False
    
    bg.reset()
    player1.reset()
    walls_group.draw(window)
    enemy_group.draw(window)



    if not game_finished:
        player1.update()
        walls_group.update()
        enemy_group.update()

    display.update()
    clock.tick(fps)

































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































